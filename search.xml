<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>折腾项目的笔记</title>
      <link href="/posts/12.html"/>
      <url>/posts/12.html</url>
      
        <content type="html"><![CDATA[<p>折腾了一个关于睡眠记录的项目，不眠不休的几天，不断失败，现在分阶段讲一下我从入门以来走过的弯路</p><h1>第一阶段——无知者无畏</h1><p>直接下载了一个炫酷的前端模板，结果发现里面的内容完全修改不了，没这个能力，完全依赖GPT和没有GPT的情况是一致的。</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250207164142894.png" alt="image-20250207164142894"></p><h1>第二阶段——开始碰壁</h1><p>开始在哔哩哔哩上搜索别人的毕业设计项目，结果就是，封装好的我都打不开，不停报错，又是两三天砸进去。</p><h1>第三阶段——从零开始</h1><p>真正开始自己做了，让我的GPT给我一个最简单的前后端，成功了，接着就想着做一个睡眠的系统，记录我的睡眠状况，这个过程又是2天的不眠不休！下面介绍下方法：</p><h2 id="软件清单">软件清单:</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm、<span class="keyword">node</span><span class="title">、vue</span>等</span><br></pre></td></tr></table></figure><h2 id="向GPT提出需求：">向GPT提出需求：</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">你好，我现在要编辑一个前端和后端的项目，我现在有的软件是IDE、<span class="built_in">npm</span>和nodejs等，请给我用时最短，工作量最小的工作流程。此外，我在这个领域一点基础也没有，请从头教我怎么做。</span><br></pre></td></tr></table></figure><h2 id="具体过程：">具体过程：</h2><p>1、新建一个文件夹<code>project</code>任意英文名都可以</p><p>2、使用<code>VScode</code>打开<code>project</code>文件夹，并打开终端依次输入以下代码（这些代码都要在project文件夹下运行）</p><p>:one:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx @vue/<span class="built_in">cli</span> create my<span class="literal">-frontend</span></span><br></pre></td></tr></table></figure><p>:two:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir my<span class="literal">-backend</span> &amp;&amp; <span class="built_in">cd</span> my<span class="literal">-backend</span></span><br></pre></td></tr></table></figure><p>:three:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init <span class="literal">-y</span></span><br></pre></td></tr></table></figure><p>:four:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express cors body<span class="literal">-parser</span></span><br></pre></td></tr></table></figure><p>:five:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch server.js</span><br></pre></td></tr></table></figure><p>:six:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> project/my<span class="literal">-frontend</span></span><br></pre></td></tr></table></figure><p>:seven:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure><p>前端全文粘贴修改VUE就可以，这是我的代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>睡眠记录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 输入表单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;saveRecord&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 第一行：日期和星期 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>日期:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">datepicker</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.date&quot;</span> <span class="attr">format</span>=<span class="string">&quot;yyyy-MM-dd&quot;</span> <span class="attr">required</span> <span class="attr">class</span>=<span class="string">&quot;datepicker-input&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>星期:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 下拉框选择星期 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.week&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择星期<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">&quot;(day, index) in weekdays&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;day&quot;</span>&gt;</span>&#123;&#123; day &#125;&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 第二行：入睡时间和苏醒时间 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>入睡时间:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.sleepTime&quot;</span> <span class="attr">type</span>=<span class="string">&quot;time&quot;</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>苏醒时间:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.wakeTime&quot;</span> <span class="attr">type</span>=<span class="string">&quot;time&quot;</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>睡眠时长记录表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>日期<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>星期<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>入睡时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>苏醒时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>睡眠时长<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;(record, index) in sleepRecords&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;date-column&quot;</span>&gt;</span>&#123;&#123; formatDate(record.date) &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; record.week &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; record.sleepTime &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; record.wakeTime &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;duration-column&quot;</span>&gt;</span>&#123;&#123; record.sleepDuration &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span> </span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;deleteRecord(index)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 睡眠统计表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>睡眠时长统计表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>每日睡眠平均时长 (小时)<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>睡眠总时间 (小时)<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>持续总天数<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; averageSleepDuration &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; totalSleepDuration &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; totalDays &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Datepicker</span> <span class="keyword">from</span> <span class="string">&#x27;vue3-datepicker&#x27;</span>; <span class="comment">// 导入日期选择器</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Datepicker</span>, <span class="comment">// 注册组件</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">weekdays</span>: [<span class="string">&#x27;Sunday&#x27;</span>, <span class="string">&#x27;Monday&#x27;</span>, <span class="string">&#x27;Tuesday&#x27;</span>, <span class="string">&#x27;Wednesday&#x27;</span>, <span class="string">&#x27;Thursday&#x27;</span>, <span class="string">&#x27;Friday&#x27;</span>, <span class="string">&#x27;Saturday&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">newRecord</span>: &#123; <span class="attr">date</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">week</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">wakeTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepDuration</span>: <span class="number">0</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">sleepRecords</span>: [],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算每日睡眠平均时长 (小时)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">averageSleepDuration</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> totalDuration = <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, record</span>) =&gt;</span> total + <span class="built_in">parseFloat</span>(record.<span class="property">sleepDuration</span>), <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> (totalDuration / <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="property">length</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算睡眠总时间 (小时)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">totalSleepDuration</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> totalDuration = <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, record</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> total + (record.<span class="property">sleepDuration</span> ? <span class="built_in">parseFloat</span>(record.<span class="property">sleepDuration</span>) : <span class="number">0</span>); <span class="comment">// 确保记录存在有效的 sleepDuration</span></span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> totalDuration.<span class="title function_">toFixed</span>(<span class="number">2</span>); <span class="comment">// 返回有效的数值，保留两位小数</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算持续总天数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">totalDays</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">deleteRecord</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!<span class="title function_">confirm</span>(<span class="string">&quot;确定要删除这条记录吗？&quot;</span>)) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 直接从前端移除数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">saveRecord</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 自动计算星期</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> weekday = <span class="variable language_">this</span>.<span class="title function_">getWeekday</span>(<span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">date</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 填充星期</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">week</span> = weekday;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 计算睡眠时长</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> sleepDuration = <span class="variable language_">this</span>.<span class="title function_">calculateSleepDuration</span>(<span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">sleepTime</span>, <span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">wakeTime</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">sleepDuration</span> = sleepDuration;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;http://localhost:3000/api/sleep-records&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newRecord</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">push</span>(response.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">newRecord</span> = &#123; <span class="attr">date</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">week</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">wakeTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepDuration</span>: <span class="number">0</span> &#125;; <span class="comment">// 重置表单</span></span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error saving record:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算星期</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">getWeekday</span>(<span class="params">date</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> days = [<span class="string">&#x27;Sunday&#x27;</span>, <span class="string">&#x27;Monday&#x27;</span>, <span class="string">&#x27;Tuesday&#x27;</span>, <span class="string">&#x27;Wednesday&#x27;</span>, <span class="string">&#x27;Thursday&#x27;</span>, <span class="string">&#x27;Friday&#x27;</span>, <span class="string">&#x27;Saturday&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(date);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> days[d.<span class="title function_">getDay</span>()]; <span class="comment">// 返回星期几</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算睡眠时长</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">calculateSleepDuration</span>(<span class="params">sleepTime, wakeTime</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> sleep = <span class="variable language_">this</span>.<span class="title function_">timeToMinutes</span>(sleepTime);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> wake = <span class="variable language_">this</span>.<span class="title function_">timeToMinutes</span>(wakeTime);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> duration = wake - sleep;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果苏醒时间小于入睡时间，表示跨越了午夜，进行调整</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (duration &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        duration += <span class="number">24</span> * <span class="number">60</span>; <span class="comment">// 加上24小时的分钟数</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> (duration / <span class="number">60</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>); <span class="comment">// 返回小时数，保留两位小数</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 将时间（HH:MM）转换为分钟数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">timeToMinutes</span>(<span class="params">time</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> [hours, minutes] = time.<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">num</span> =&gt;</span> <span class="built_in">parseInt</span>(num, <span class="number">10</span>));</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> hours * <span class="number">60</span> + minutes;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 格式化日期为 YYYY年MM月DD日</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">formatDate</span>(<span class="params">date</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(date);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> year = d.<span class="title function_">getFullYear</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> month = (d.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> day = d.<span class="title function_">getDate</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;year&#125;</span>年<span class="subst">$&#123;month&#125;</span>月<span class="subst">$&#123;day&#125;</span>日`</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">async</span> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:3000/api/sleep-records&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">sleepRecords</span> = response.<span class="property">data</span>.<span class="title function_">map</span>(<span class="function"><span class="params">record</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        record.<span class="property">sleepDuration</span> = <span class="variable language_">this</span>.<span class="title function_">calculateSleepDuration</span>(record.<span class="property">sleepTime</span>, record.<span class="property">wakeTime</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> record;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching records:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* 设置皮卡丘背景图 */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://p.sda1.dev/21/f49fe2aab1553c84f68627b04432d22b/toy-3633751.jpg&#x27;</span>); <span class="comment">/* 替换为皮卡丘图片链接 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-position</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-repeat</span>: no-repeat; <span class="comment">/* 避免重复 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative; <span class="comment">/* 确保元素定位不受影响 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">form</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>); <span class="comment">/* 半透明背景 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#f4f4f4</span>, <span class="number">#e0e0e0</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* 保持现有的样式 */</span></span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.datepicker-input),</span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.vue3-datepicker__input) &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.vue3-datepicker-wrapper) &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: block <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.vue3-datepicker) &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.input-box</span> <span class="selector-tag">input</span>, <span class="selector-class">.datepicker-input</span>, <span class="selector-tag">select</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">form</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>); <span class="comment">/* 半透明背景 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.input-box</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">label</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#45a049</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#f4f4f4</span>, <span class="number">#e0e0e0</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">th</span>,</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#f1f1f1</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">th</span>, <span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-class">.date-column</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-class">.duration-column</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>后端改server.js，这是我的代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">express</span> <span class="operator">=</span> require(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="type">const</span> <span class="variable">cors</span> <span class="operator">=</span> require(<span class="string">&#x27;cors&#x27;</span>);  <span class="comment">// 引入 CORS 模块</span></span><br><span class="line"><span class="type">const</span> <span class="variable">app</span> <span class="operator">=</span> express();</span><br><span class="line"><span class="type">const</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 CORS 中间件</span></span><br><span class="line">app.use(cors(&#123;</span><br><span class="line">  origin: <span class="string">&#x27;http://192.168.31.71:8080&#x27;</span>, <span class="comment">// 允许来自此地址的请求</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">app.use(express.json()); <span class="comment">// 解析 JSON 格式的请求体</span></span><br><span class="line"></span><br><span class="line"><span class="type">let</span> <span class="variable">sleepData</span> <span class="operator">=</span> [];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理根路径请求</span></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.send(<span class="string">&#x27;Hello, this is the server!&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取所有睡眠记录</span></span><br><span class="line">app.get(<span class="string">&#x27;/api/sleep-records&#x27;</span>, (req, res) =&gt; &#123;</span><br><span class="line">  res.json(sleepData);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存新的睡眠记录</span></span><br><span class="line">app.post(<span class="string">&#x27;/api/sleep-records&#x27;</span>, (req, res) =&gt; &#123;</span><br><span class="line">  const &#123; date, week, sleepTime, wakeTime &#125; = req.body;</span><br><span class="line">  <span class="type">const</span> <span class="variable">duration</span> <span class="operator">=</span> calculateSleepDuration(sleepTime, wakeTime);</span><br><span class="line">  <span class="type">const</span> <span class="variable">newRecord</span> <span class="operator">=</span> &#123; date, week, sleepTime, wakeTime, sleepDuration: duration &#125;; <span class="comment">// 确保字段名一致</span></span><br><span class="line">  sleepData.push(newRecord);</span><br><span class="line">  res.status(<span class="number">201</span>).json(newRecord);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算睡眠时长（小时）</span></span><br><span class="line">function <span class="title function_">calculateSleepDuration</span><span class="params">(sleepTime, wakeTime)</span> &#123;</span><br><span class="line">  <span class="type">const</span> <span class="variable">sleep</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(`<span class="number">1970</span>-<span class="number">01</span>-01T$&#123;sleepTime&#125;:<span class="number">00</span>`); <span class="comment">// 将时间转为 Date 对象</span></span><br><span class="line">  <span class="type">const</span> <span class="variable">wake</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(`<span class="number">1970</span>-<span class="number">01</span>-01T$&#123;wakeTime&#125;:<span class="number">00</span>`);</span><br><span class="line">  <span class="type">let</span> <span class="variable">duration</span> <span class="operator">=</span> (wake - sleep) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>); <span class="comment">// 计算小时</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (duration &lt; <span class="number">0</span>) duration += <span class="number">24</span>; <span class="comment">// 处理跨越午夜的情况</span></span><br><span class="line">  <span class="keyword">return</span> parseFloat(duration.toFixed(<span class="number">2</span>)); <span class="comment">// 保持为数字</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动服务</span></span><br><span class="line">app.listen(port, () =&gt; &#123;</span><br><span class="line">  console.log(`Server running at http:<span class="comment">//localhost:$&#123;port&#125;`);</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3、可以开始运行了</p><p>前端是：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure><p>后端是：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node server.js</span><br></pre></td></tr></table></figure><p>4、在运行过程中可能会发现，一个情况就是当前端后端重启以后数据就会消失，对于这种情况可以考虑引入<code>SQLite 数据库</code></p><p>运行以下代码：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> sqlite3</span><br></pre></td></tr></table></figure><p>修改后的完整前端代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>睡眠记录<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 输入表单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;saveRecord&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 第一行：日期和星期 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>日期:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">datepicker</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.date&quot;</span> <span class="attr">format</span>=<span class="string">&quot;yyyy-MM-dd&quot;</span> <span class="attr">required</span> <span class="attr">class</span>=<span class="string">&quot;datepicker-input&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>星期:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 下拉框选择星期 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.week&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择星期<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">&quot;(day, index) in weekdays&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;day&quot;</span>&gt;</span>&#123;&#123; day &#125;&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 第二行：入睡时间和苏醒时间 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>入睡时间:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.sleepTime&quot;</span> <span class="attr">type</span>=<span class="string">&quot;time&quot;</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span>苏醒时间:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;newRecord.wakeTime&quot;</span> <span class="attr">type</span>=<span class="string">&quot;time&quot;</span> <span class="attr">required</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>保存<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>睡眠时长记录表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>日期<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>星期<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>入睡时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>苏醒时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>睡眠时长<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;(record, index) in sleepRecords&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;date-column&quot;</span>&gt;</span>&#123;&#123; formatDate(record.date) &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; record.week &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; record.sleepTime &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; record.wakeTime &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;duration-column&quot;</span>&gt;</span>&#123;&#123; record.sleepDuration &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span> </span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;deleteRecord(index)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 睡眠统计表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>睡眠时长统计表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>每日睡眠平均时长 (小时)<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>睡眠总时间 (小时)<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">th</span>&gt;</span>持续总天数<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; averageSleepDuration &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; totalSleepDuration &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; totalDays &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Datepicker</span> <span class="keyword">from</span> <span class="string">&#x27;vue3-datepicker&#x27;</span>; <span class="comment">// 导入日期选择器</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Datepicker</span>, <span class="comment">// 注册组件</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">weekdays</span>: [<span class="string">&#x27;Sunday&#x27;</span>, <span class="string">&#x27;Monday&#x27;</span>, <span class="string">&#x27;Tuesday&#x27;</span>, <span class="string">&#x27;Wednesday&#x27;</span>, <span class="string">&#x27;Thursday&#x27;</span>, <span class="string">&#x27;Friday&#x27;</span>, <span class="string">&#x27;Saturday&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">newRecord</span>: &#123; <span class="attr">date</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">week</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">wakeTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepDuration</span>: <span class="number">0</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">sleepRecords</span>: [],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算每日睡眠平均时长 (小时)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">averageSleepDuration</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="property">length</span> === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> totalDuration = <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, record</span>) =&gt;</span> total + <span class="built_in">parseFloat</span>(record.<span class="property">sleepDuration</span>), <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> (totalDuration / <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="property">length</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算睡眠总时间 (小时)</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">totalSleepDuration</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> totalDuration = <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">total, record</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> total + (record.<span class="property">sleepDuration</span> ? <span class="built_in">parseFloat</span>(record.<span class="property">sleepDuration</span>) : <span class="number">0</span>); <span class="comment">// 确保记录存在有效的 sleepDuration</span></span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">0</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> totalDuration.<span class="title function_">toFixed</span>(<span class="number">2</span>); <span class="comment">// 返回有效的数值，保留两位小数</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算持续总天数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">totalDays</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">deleteRecord</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!<span class="title function_">confirm</span>(<span class="string">&quot;确定要删除这条记录吗？&quot;</span>)) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 获取要删除记录的日期（或者其他唯一标识符）</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> recordToDelete = <span class="variable language_">this</span>.<span class="property">sleepRecords</span>[index];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 向后端发送删除请求</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">delete</span>(<span class="string">`http://localhost:3000/api/sleep-records/<span class="subst">$&#123;recordToDelete.date&#125;</span>`</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果后端删除成功，移除前端数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;删除失败:&#x27;</span>, response.<span class="property">data</span>.<span class="property">message</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error deleting record:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">async</span> <span class="title function_">saveRecord</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 自动计算星期</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> weekday = <span class="variable language_">this</span>.<span class="title function_">getWeekday</span>(<span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">date</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 填充星期</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">week</span> = weekday;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 计算睡眠时长</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> sleepDuration = <span class="variable language_">this</span>.<span class="title function_">calculateSleepDuration</span>(<span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">sleepTime</span>, <span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">wakeTime</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">newRecord</span>.<span class="property">sleepDuration</span> = sleepDuration;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;http://localhost:3000/api/sleep-records&#x27;</span>, <span class="variable language_">this</span>.<span class="property">newRecord</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">sleepRecords</span>.<span class="title function_">push</span>(response.<span class="property">data</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">newRecord</span> = &#123; <span class="attr">date</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">week</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">wakeTime</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">sleepDuration</span>: <span class="number">0</span> &#125;; <span class="comment">// 重置表单</span></span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error saving record:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算星期</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">getWeekday</span>(<span class="params">date</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> days = [<span class="string">&#x27;Sunday&#x27;</span>, <span class="string">&#x27;Monday&#x27;</span>, <span class="string">&#x27;Tuesday&#x27;</span>, <span class="string">&#x27;Wednesday&#x27;</span>, <span class="string">&#x27;Thursday&#x27;</span>, <span class="string">&#x27;Friday&#x27;</span>, <span class="string">&#x27;Saturday&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(date);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> days[d.<span class="title function_">getDay</span>()]; <span class="comment">// 返回星期几</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 计算睡眠时长</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">calculateSleepDuration</span>(<span class="params">sleepTime, wakeTime</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> sleep = <span class="variable language_">this</span>.<span class="title function_">timeToMinutes</span>(sleepTime);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> wake = <span class="variable language_">this</span>.<span class="title function_">timeToMinutes</span>(wakeTime);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> duration = wake - sleep;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 如果苏醒时间小于入睡时间，表示跨越了午夜，进行调整</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (duration &lt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        duration += <span class="number">24</span> * <span class="number">60</span>; <span class="comment">// 加上24小时的分钟数</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> (duration / <span class="number">60</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>); <span class="comment">// 返回小时数，保留两位小数</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 将时间（HH:MM）转换为分钟数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">timeToMinutes</span>(<span class="params">time</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> [hours, minutes] = time.<span class="title function_">split</span>(<span class="string">&#x27;:&#x27;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">num</span> =&gt;</span> <span class="built_in">parseInt</span>(num, <span class="number">10</span>));</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> hours * <span class="number">60</span> + minutes;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 格式化日期为 YYYY年MM月DD日</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">formatDate</span>(<span class="params">date</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(date);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> year = d.<span class="title function_">getFullYear</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> month = (d.<span class="title function_">getMonth</span>() + <span class="number">1</span>).<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> day = d.<span class="title function_">getDate</span>().<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;year&#125;</span>年<span class="subst">$&#123;month&#125;</span>月<span class="subst">$&#123;day&#125;</span>日`</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">async</span> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:3000/api/sleep-records&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">sleepRecords</span> = response.<span class="property">data</span>.<span class="title function_">map</span>(<span class="function"><span class="params">record</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        record.<span class="property">sleepDuration</span> = <span class="variable language_">this</span>.<span class="title function_">calculateSleepDuration</span>(record.<span class="property">sleepTime</span>, record.<span class="property">wakeTime</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> record;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error fetching records:&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* 设置皮卡丘背景图 */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;https://p.sda1.dev/21/f49fe2aab1553c84f68627b04432d22b/toy-3633751.jpg&#x27;</span>); <span class="comment">/* 替换为皮卡丘图片链接 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-position</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-repeat</span>: no-repeat; <span class="comment">/* 避免重复 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative; <span class="comment">/* 确保元素定位不受影响 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">form</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>); <span class="comment">/* 半透明背景 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#f4f4f4</span>, <span class="number">#e0e0e0</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* 保持现有的样式 */</span></span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.datepicker-input),</span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.vue3-datepicker__input) &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.vue3-datepicker-wrapper) &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: block <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(.vue3-datepicker) &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span> <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.input-box</span> <span class="selector-tag">input</span>, <span class="selector-class">.datepicker-input</span>, <span class="selector-tag">select</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">form</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.8</span>); <span class="comment">/* 半透明背景 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.grid-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">grid-gap</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.input-box</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">label</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#45a049</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#f4f4f4</span>, <span class="number">#e0e0e0</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">th</span>,</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">12px</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">th</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">tr</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#f1f1f1</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-tag">th</span>, <span class="selector-tag">table</span> <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">transition</span>: background-color <span class="number">0.3s</span> ease;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-class">.date-column</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span> <span class="selector-class">.duration-column</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>完整的后端代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="variable">express</span> <span class="operator">=</span> require(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="type">const</span> <span class="variable">cors</span> <span class="operator">=</span> require(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"><span class="type">const</span> <span class="variable">sqlite3</span> <span class="operator">=</span> require(<span class="string">&#x27;sqlite3&#x27;</span>).verbose();</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="variable">app</span> <span class="operator">=</span> express();</span><br><span class="line"><span class="type">const</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许 CORS 访问</span></span><br><span class="line">app.use(cors(&#123; origin: <span class="string">&#x27;http://192.168.31.71:8080&#x27;</span> &#125;));</span><br><span class="line">app.use(express.json());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接 SQLite 数据库（如果 sleep_data.db 不存在，则自动创建）</span></span><br><span class="line"><span class="type">const</span> <span class="variable">db</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">sqlite3</span>.Database(<span class="string">&#x27;./sleep_data.db&#x27;</span>, (err) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) console.error(<span class="string">&#x27;❌ SQLite 连接失败:&#x27;</span>, err.message);</span><br><span class="line">  <span class="keyword">else</span> console.log(<span class="string">&#x27;✅ 成功连接 SQLite 数据库&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建表（如果不存在）</span></span><br><span class="line">db.run(`CREATE TABLE IF NOT EXISTS <span class="title function_">sleep_records</span> <span class="params">(</span></span><br><span class="line"><span class="params">    id INTEGER PRIMARY KEY AUTOINCREMENT,</span></span><br><span class="line"><span class="params">    date TEXT,</span></span><br><span class="line"><span class="params">    week TEXT,</span></span><br><span class="line"><span class="params">    sleepTime TEXT,</span></span><br><span class="line"><span class="params">    wakeTime TEXT,</span></span><br><span class="line"><span class="params">    sleepDuration REAL</span></span><br><span class="line"><span class="params">)</span>`);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取所有睡眠记录</span></span><br><span class="line">app.get(<span class="string">&#x27;/api/sleep-records&#x27;</span>, (req, res) =&gt; &#123;</span><br><span class="line">  db.all(<span class="string">&#x27;SELECT * FROM sleep_records&#x27;</span>, [], (err, rows) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> res.status(<span class="number">500</span>).json(&#123; error: err.message &#125;);</span><br><span class="line">    res.json(rows);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存新的睡眠记录</span></span><br><span class="line">app.post(<span class="string">&#x27;/api/sleep-records&#x27;</span>, (req, res) =&gt; &#123;</span><br><span class="line">  const &#123; date, week, sleepTime, wakeTime &#125; = req.body;</span><br><span class="line">  <span class="keyword">if</span> (!date || !week || !sleepTime || !wakeTime) &#123;</span><br><span class="line">    <span class="keyword">return</span> res.status(<span class="number">400</span>).json(&#123; error: <span class="string">&#x27;所有字段都是必填的&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="type">const</span> <span class="variable">sleepDuration</span> <span class="operator">=</span> calculateSleepDuration(sleepTime, wakeTime);</span><br><span class="line"></span><br><span class="line">  db.run(</span><br><span class="line">    <span class="string">&#x27;INSERT INTO sleep_records (date, week, sleepTime, wakeTime, sleepDuration) VALUES (?, ?, ?, ?, ?)&#x27;</span>,</span><br><span class="line">    [date, week, sleepTime, wakeTime, sleepDuration],</span><br><span class="line">    function (err) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) <span class="keyword">return</span> res.status(<span class="number">500</span>).json(&#123; error: err.message &#125;);</span><br><span class="line"></span><br><span class="line">      res.status(<span class="number">201</span>).json(&#123;</span><br><span class="line">        id: <span class="built_in">this</span>.lastID,</span><br><span class="line">        date,</span><br><span class="line">        week,</span><br><span class="line">        sleepTime,</span><br><span class="line">        wakeTime,</span><br><span class="line">        sleepDuration,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算睡眠时长</span></span><br><span class="line">function <span class="title function_">calculateSleepDuration</span><span class="params">(sleepTime, wakeTime)</span> &#123;</span><br><span class="line">  <span class="type">const</span> <span class="variable">sleep</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(`<span class="number">1970</span>-<span class="number">01</span>-01T$&#123;sleepTime&#125;:<span class="number">00</span>`);</span><br><span class="line">  <span class="type">const</span> <span class="variable">wake</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(`<span class="number">1970</span>-<span class="number">01</span>-01T$&#123;wakeTime&#125;:<span class="number">00</span>`);</span><br><span class="line">  <span class="type">let</span> <span class="variable">duration</span> <span class="operator">=</span> (wake - sleep) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>); <span class="comment">// 计算小时</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (duration &lt; <span class="number">0</span>) duration += <span class="number">24</span>; <span class="comment">// 处理跨夜情况</span></span><br><span class="line">  <span class="keyword">return</span> parseFloat(duration.toFixed(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除指定的睡眠记录</span></span><br><span class="line">app.delete(<span class="string">&#x27;/api/sleep-records/:date&#x27;</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="type">const</span> <span class="variable">date</span> <span class="operator">=</span> req.params.date;</span><br><span class="line">  console.log(<span class="string">&#x27;请求删除记录的日期:&#x27;</span>, date);  <span class="comment">// 查看是否收到了正确的日期</span></span><br><span class="line">  </span><br><span class="line">  db.run(<span class="string">&#x27;DELETE FROM sleep_records WHERE date = ?&#x27;</span>, [date], function(err) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      console.error(<span class="string">&#x27;删除错误:&#x27;</span>, err);</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">500</span>).json(&#123; message: <span class="string">&#x27;删除失败&#x27;</span>, error: err &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.changes === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> res.status(<span class="number">404</span>).json(&#123; message: <span class="string">&#x27;未找到记录&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    res.status(<span class="number">200</span>).json(&#123; message: <span class="string">&#x27;记录已删除&#x27;</span> &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动服务器</span></span><br><span class="line">app.listen(port, () =&gt; &#123;</span><br><span class="line">  console.log(`🚀 服务器运行在 http:<span class="comment">//localhost:$&#123;port&#125;`);</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行完毕之后就会有一个睡眠记录的系统了，下面就是一些细节的调整，调整的过程中一定要不断停下来看看，避免一头扎进去，忙了很多天还是没有进展，如果突破不了，别怕从头开始。</p><p>5、封装和一步启动</p><p>创建 <code>start_project.bat</code> 文件，写入如下代码：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">start</span> cmd /k <span class="string">&quot;cd /d 你的后端完整路径 &amp;&amp; node index.js&quot;</span></span><br><span class="line"><span class="built_in">start</span> cmd /k <span class="string">&quot;cd /d 你的前端完整路径 &amp;&amp; npm run serve&quot;</span></span><br><span class="line">timeout /t <span class="number">5</span> &gt;nul</span><br><span class="line"><span class="built_in">start</span> <span class="string">&quot;&quot;</span> <span class="string">&quot;你的网址&quot;</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><p>至此，大功告成！如果出现一些bug啥的，耐心点儿分析分析，想想办法，别跳起来拍桌子。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 技术 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图床教程</title>
      <link href="/posts/6.html"/>
      <url>/posts/6.html</url>
      
        <content type="html"><![CDATA[<p>推荐使用picgo搭建自己的图床</p><h2 id="3-PicGo结合Markdown实时上传图片">3.PicGo结合Markdown实时上传图片</h2><ul><li><p>Picgo究竟是什么？这是一个开源软件，开源地址：<a href="https://github.com/Molunerfinn/PicGo">Molunerfinn/PicGo</a></p></li><li><p>引用项目的介绍：这是一个用于快速上传图片并获取图片 URL 链接的工具，关键是他可以与Typora配套一起使用，在粘贴图片的同时上传图片，十分方便！</p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image.webp" alt="img"></p></li><li><p>下载软件后直接一路安装下去就行，建议装在非C盘的任意一个盘。</p></li></ul><h3 id="3-1-Github图床">3.1 Github图床</h3><ol><li><p>进入软件之后，一路到设置里面取消勾选其他图床，只留下Github图床一项，因为我们的现在要弄Github图床。</p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-1.webp" alt="img"></p></li><li><p>然后到Github新建一个仓库，创建仓库的教程前面有讲，这里就不赘述了，<code>仓库名字</code>和<code>描述</code>随意，最重要的是权限一定要选<code>public</code>，这样你的图片才可以随时随地访问到。在图床设置的Github配置处，按照下图填入对应的信息：</p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-2.webp" alt="img"></p><p>自定义域名的格式为：<code>https://cdn.staticaly.com/gh/用户名/仓库名@main</code>，比如我的就是<code>https://cdn.staticaly.com/gh/fomalhaut1998/markdown_pic@main</code>，对应的<code>用户名</code>和<code>仓库名</code>记住要换成自己名字，不能有空格！！！</p><p>Token的获取方式为：<code>右上角头像</code>-&gt;<code>Setting</code>-&gt;<code>左边栏Developer Settings</code>-&gt;<code>左栏Personal access tokens</code>-&gt;<code>左栏tokens(classic)</code></p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-3.webp" alt="img"></p><p>创建Token时，<code>Note</code>随意；<code>Exporation</code>选<code>No expiration</code>，<code>Select scopes</code>必须把<code>repo</code>这一项勾上，然后点击生成就行</p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-4.webp" alt="img"></p><p>这个时候必须马上复制出现的token，不然后面就看不到了，复制了填进去刚刚的Token选项，随后点击确定保存</p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-5.webp" alt="img"></p></li><li><p>随便拖拽一张图片进来上传区域这里，应该就可以上传成功，随后把生成的链接复制就可以，此时打开仓库可以发现图片上传到了指定的文件夹。注意：每个仓库大小限制是1G！！！</p></li></ol><p><a href="https://tuchuang.voooe.cn/images/2022/12/30/image-6.webp"><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-6.webp" alt="img"></a></p><h3 id="3-2-Bilibili图床">3.2 Bilibili图床</h3><ul><li>由于这个图床用在博客里存在跨域问题，因此不再推荐使用了，开源地址：<a href="https://github.com/xlzy520/typora-plugin-bilibili">typora-plugin-bilibili</a></li><li>如需了解使用教程，见视频教程<a href="https://www.bilibili.com/video/BV1ZG411N7LS/">第12期：免费图床综合教程（二）</a></li></ul><h3 id="3-3-CF图床">3.3 CF图床</h3><h2 id="Cloudflare-R2-配置流程">Cloudflare R2 配置流程</h2><h3 id="1、注册一个CF账号">1、注册一个CF账号</h3><p>进入 <a href="https://dash.cloudflare.com/">https://dash.cloudflare.com/</a> 进行注册。</p><h3 id="2、开通-Cloudflare-R2-服务">2、开通 Cloudflare R2 服务</h3><p>进入 CF 仪表盘，找到侧边栏的 R2 并进入。</p><blockquote><p>R2 是一项带有免费额度的付费服务，因此需要进行绑定支付方式。一般支持银联的信用卡均可使用。</p></blockquote><p>绑定完后就可以看到如下界面：</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250214110048793.png" alt="image-20250214110048793"></p><h3 id="3、创建存储桶">3、创建存储桶</h3><p>在创建页面中，你可以选择储存桶位置并选择存储类型：</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250214134108861.png" alt="image-20250214134108861"></p><p>对于位置你可以指定一个距离你源站或者常链接的CDN位置进行选择，理论上，距离越短访问延迟越低，默认跟据你当前链接CF的IP地址进行选择。 但是CF似乎会将数据同步到全球数据中心。</p><p>对于图床的应用场景，我们应该选择 “标准” 类型。因为图床会频繁的请求某张图片，而 “不频繁访问” 的 A/B 类操作价格都是相当昂贵的。</p><h3 id="4、开启公开访问">4、开启公开访问</h3><p>默认情况下，R2存储桶是不支持通过域名直接外部访问的，仅可通过R2 API或者S3兼容API进行访问。而我们建立图床则需要公开通过域名访问。因此在创建完存储桶后，我们可以在存储同内打开相关选项。</p><p>点击我们刚刚创建完的存储桶：</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250214134257826.png" alt="image-20250214134257826"></p><p>在公开访问开启。请注意，如果你想要配置自己的域名，必须先将自己的域名先接入CF中。CF提供的<code>R2.dev</code> 子域具有访问速率限制（虽然我没有测试出来），非常强烈建议你绑定自己的域名！</p><h3 id="5、配置-API-访问权限">5、配置 API 访问权限</h3><p>回到R2界面，点击 “管理R2 API令牌”</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250214134537223.png" alt="image-20250214134537223"></p><p>创建一个新令牌，仅适用于你希望配置的存储桶或者全部存储桶上（取决于你的具体需要），令牌名称随意，权限选择读和写。</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250215134521574.png" alt="image-20250215134521574"></p><p>接下来会弹出你配置的相关API参数，请不要关闭这个页面，后续无法通过面板找回密钥</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250215134609143.png" alt="image-20250215134609143"></p><p>从这里开始，CF中的配置就已经完成了。</p><h2 id="PicGo的配置">PicGo的配置</h2><h3 id="1、下载并安装">1、下载并安装</h3><p>自行解决，官网 <a href="https://picgo.github.io/PicGo-Doc/zh/guide/getting-started.html">Wiki</a></p><h3 id="2、S3插件安装">2、S3插件安装</h3><p>进入插件设置，输入<code>S3</code>后点击安装即可</p><p>提示</p><p>如果输入<code>S3</code>或其他插件名称后多次没有结果，可以采取手动安装的方式。参考 <a href="https://blog.wangms.org/ops/07_PicGo%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6.html">PicGo手动安装插件</a></p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250215134749253.png" alt="image-20250215134749253"></p><h3 id="3、插件配置">3、插件配置</h3><p>其中需要注意的几个点：</p><ul><li>应用密钥ID就是CF API中的<strong>访问密钥ID</strong>；</li><li>应用密钥就是CF API中的<strong>机密访问密钥</strong>；</li><li>权限必须填写private；</li><li>地区选择auto（必须为全小写），或者R2文档中提及的具体位置；</li><li>ACL访问控制列表会默认为权限中的配置。</li></ul><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250215134832235.png" alt="image-20250215134832235"></p><p>设置完成后一定要点击下方保存</p><h3 id="4、Picgo-使用方法">4、Picgo 使用方法</h3><p>接着你就可以在上传区选择图片上传或者直接通过剪贴板进行上传</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250215134911990.png" alt="image-20250215134911990"></p><p>如果你的配置无误，那么相册中就可以看到你上传的图片了：</p><p><img src="https://pub-b03ca977d5f94fa9a669bf6f295ab98a.r2.dev/PicGo/image-20250215134942645.png" alt="image-20250215134942645"></p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技术 </tag>
            
            <tag> 图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>黑茶</title>
      <link href="/posts/4.html"/>
      <url>/posts/4.html</url>
      
        <content type="html"><![CDATA[<h1>历史沿革</h1><table><thead><tr><th>时期</th><th>代表人物/著作</th><th>事件/贡献</th></tr></thead><tbody><tr><td><strong>唐宋时期</strong></td><td>陆羽</td><td>《茶经》：记载茶叶分类及加工方式</td></tr><tr><td></td><td>蔡襄</td><td>《茶录》：提及四川边茶，表明黑茶前身已存在</td></tr><tr><td><strong>明朝</strong></td><td>朱元璋</td><td>废除团茶，推行散茶，促进黑茶发展</td></tr><tr><td></td><td>《明实录》</td><td>记载湖广地区生产黑茶，供边疆交易</td></tr><tr><td><strong>清朝</strong></td><td>乾隆帝</td><td>推崇普洱茶，令其成为贡茶，促进黑茶兴盛</td></tr><tr><td></td><td>《理藩院则例》</td><td>规定向蒙古、西藏供应砖茶，黑茶成为官方贸易茶</td></tr><tr><td><strong>民国</strong></td><td>吴觉农</td><td>推动茶业现代化，提出黑茶产业改良措施</td></tr><tr><td></td><td>《湖南茶叶调查报告》</td><td>详细记载安化黑茶的加工与贸易情况</td></tr></tbody></table><h1>使用指南</h1><h2 id="产地分类">产地分类</h2><p><strong>一、黑茶四大产地</strong></p><p><strong>1、湖北老青茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192021-51.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>青砖茶是黑茶之一，青砖茶主要产于湖北的咸宁地区。已有一百多年的生产历史。它以老青茶为原料，经压制而成。青砖茶的压制分三四面、二面和里茶三个部分。其中三四面，即面层部分质量最好。色泽为棕色，茶汁味浓可口，香气独特，回甘隽永。最外一层称洒面，原料的质量最好，最里面的一层称二面，质量稍差，这两层之间的一层称里茶，质量较差。</p><p>青砖的外形为长方形，色泽青褐，香气纯正，汤色红黄，滋味香浓。饮用青砖茶，除生津解渴外，还具有清新提神，帮助消化，杀菌止泻等功效。主要销往内蒙古等西北地区。以老青茶作原料，经压制而成紧压青茶，其产地主要在湖北省咸宁地区的薄圻、咸宁、通山、崇阳、通城、赤壁等县，已有100多年的历史。</p><p><strong>2、广西六堡茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192021.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>六堡茶，原产于广西苍梧县的六堡乡，因产地而得名。在清嘉庆年间，六堡茶以其特殊的槟榔香而列为中国名茶之一。</p><p>六堡乡位于北回归线北侧，年平均气温21.2℃，年降雨1500毫米。境内峰峦耸立，海拔1000-1500米，坡度较大。茶叶多种植在山腰或峡谷，距村庄远达3-10公里。林区溪流纵横，山清水秀，日照短，终年云雾缭绕。历史上，六堡茶产区有恭州村茶、黑石村茶、罗笛村茶、蚕村茶等，以恭州村茶及黑石村茶品质最佳。</p><p>六堡茶所以受到人们的特别喜爱，有它的历史原因，更因其具有特殊的品质。泡饮时，汤色红浓明净似琥珀，香气醇陈，滋味浓醇甘和，有槟榔味，越陈越好。素以“红、浓、醇、陈”四绝而著称。茶叶中有“发金花”的，即生有金黄霉菌的最爱欢迎。因金黄霉菌能分泌多种酶，使茶叶物质加速转化，形成特殊风味，药效也较显著。</p><p>它的制作过程，除了一般黑茶的杀青、渥堆等，后期的陈化长达180天。传说中，梧州茶厂的陈化仓库是独一无二的，充满神秘色彩。</p><p><strong>3、湖南黑茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192021-50.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>16世纪以前记载的黑茶，是指四川由绿毛茶经做色后蒸压而成。湖南黑茶在四川黑茶之后，是在初制过程中直接做成。据【明史食货志】记载：“神宗万历十三年（公元1585年)，中茶易马，惟汉中保宁，而湖南产茶值贱，商人率我境么贩。”由于湖南黑茶质优价廉，于是在16世纪末期，逐渐取代了四川的黑茶。</p><p>湖南黑茶产地始于安化。而安化黑茶最早产于苞芷园，后转至资江沿岸的鸦雀坪、黄沙坪、硒州、江南、小淹等地，以江南为集中地，品质则以高家溪、马家溪为最好。</p><p>历史上有天尖、贡尖、生尖、花卷和黑砖等成品，而天、贡、生三尖为黑茶的上品。花卷净重36千克，折合老市秤一千两，故又名“千两茶”。采用高、马二溪的优质黑茶，精工细制，品质优异。茯砖创制在1860年前后，早期称“湖茶”，因在伏天加工，故又称“伏茶”，因原料送到泾阳筑制，又称“泾阳砖”。1951年，湖南白沙溪茶厂在当地发花成功，此后不必再将茶运至陕西泾阳加工。</p><p>历史上茯砖每包90公斤，1986年起规格逐步小型化。泡饮时，要求汤红不浊，香清不粗，味厚不涩，口劲强，耐冲泡。特别要求砖内金黄色霉菌，俗称“金花”，学名称之为冠突散囊菌，内含丰富的多种营养素，对人体极为有益，金花越茂盛，则品质越佳。颗粒大，干嗅有黄花清香。</p><p><strong>4、四川边茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192417.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>四川是黑茶主要生产基地，亦是传统边销茶的发源地。按销路分南路边茶和西路边茶两大类。南路边茶以雅安为制造中心，产地主要为雅安、荥经、天全、名山四县市，主要销往西藏、青海和四川的阿坝、凉山自治州，以及甘南地区。西路边茶以都江堰市为制造中心，销往四川的松潘、理县、茂县、汶川和甘肃的部分地区。</p><p>南路边茶原料粗老并包含一部分茶梗。因鲜叶加工方法不同，把毛茶分为两种：杀青后未经蒸揉而直接干燥的，称“毛庄茶”或叫“金玉茶”；杀青后经多次蒸揉和渥堆然后干燥的，称“做庄茶”。“毛庄茶”因制法简单，品质较差，已被淘汰。</p><p>南路边茶初制工艺较繁琐。做庄茶传统做法最多的要经过一炒、三蒸、三踩、四堆、四晒、二拣、一筛共18道工序，最少的也要经14道工序。60年代以来，经过不断改进，新工艺已简化为8道工序。</p><p>新工艺的制造工序依次为：蒸青、初揉、初拣、初干、复揉、握堆、复拣、足干。杀青采用蒸汽的方法，渥堆方法有自然渥堆和加温保湿渥堆两种。自然渥堆是将揉捻叶趁热堆积，堆高1.5-2米，堆面用席密盖，以保持温湿度。约经2-3天，用木叉翻堆一次，将表层堆叶翻入堆心，重新整理成堆。</p><p>再经过2-3天，叶色转变为黄褐色或棕褐色，即为渥堆适度，开堆拣去粗梗进行干燥。加温保湿握堆是在特建的握堆房中进行的。其原理相同，只不过渥堆时间缩短到36-38小时。</p><p>西边茶原料比南边茶更为粗老，以采割1-2年生枝条为原料，是一种最粗老的茶叶。工艺简单，杀青后晒干即可。</p><p><strong>二、黑茶四大金刚</strong></p><p>黑砖、花砖、茯砖、青砖，被称为黑茶四大金刚。</p><p>历史上黑砖、花砖原料高于茯砖、青砖；黑砖与花砖相比，花砖是由花卷茶演变而来，四周压有花纹，黑砖四周没有；同档次青砖和茯砖原料差不多，茯砖要求发花，其压得稍松，青砖较紧。</p><p><strong>1、青砖茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192021-52.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>以老青茶作原料，经压制而成青压青茶。青砖茶主要产于湖北的咸宁地区，主要销往内蒙古等西北地区。</p><p>青砖的外形为长方形，色泽青褐，香气纯正，汤色红黄，滋味香浓。饮用青砖茶，除生津解渴外，还具有清新提神，帮助消化，杀菌止泻等功效。每片青砖重2公斤(其中洒面、二面占0.125公斤，里茶1.75公斤)大小规格为34×17×4厘米。</p><p><strong>2、花砖茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192343.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>一是由卷形改砖形，二是砖面四边有花纹，以示与其它砖茶的区别，故名“花砖”。花砖历史上叫“花卷”，因一卷茶净重合老秤1000两，故又称“千两茶”。花卷的加工方法是用湖南安化高家溪和马安溪的优质黑毛茶作原料。</p><p>花砖茶正面边有花纹，砖面色泽黑褐，内质香气纯正，滋味纯正，滋味浓厚微涩，汤色红黄，叶底老嫩匀称，每片花砖净重2公斤。花砖茶销区以大原为中心，并转达销晋东、北京、内蒙古自治区等地。</p><p>花砖茶砖面上方压印有“中茶”商标图案，下方压印有“安化花砖”字样，四边压印斜条花纹。</p><p><strong>3、茯砖茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192243.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>茯砖茶，分特制和普通两个品种。特制茯砖全部用三级黑毛茶作原料，而压制普通茯砖的原料中，三级黑毛茶只占到40–45%，四级黑毛茶占5–10%，其他茶占50%。</p><p>其压制程序与黑、花两砖基本相同，其不同之点是在砖形的厚度上。因为茯砖特有的“发花”工序，除需要很多条件外，一个重要的条件是要求砖体松紧适度，便于微生物的繁殖活动。</p><p>茯砖与黑、花两砖另一个不同之点，是砖从砖模退出后，不直接送进烘房烘干，而是为促使“发花”，先包好商标纸，再送进烘房烘干。烘干的速度不要求快干，整个烘期比黑、花两砖长一倍以上，以求缓慢“发花”。</p><p>茯砖茶砖面平整，棱角分明，厚薄一致，发花普遍茂盛；特茯砖面为黑褐色，普茯砖面为黄褐色。香气纯正，汤色橙黄。特茯滋味醇和，普茯滋味纯和，无涩味。</p><p>新疆各少数民族最爱茯砖茶，他们把“金花”多少视为检查茯砖茶品质好坏的唯一标志。</p><p><strong>4、黑砖茶</strong></p><p><img src="https://www.yinchar.com/uploads/allimg/210112/1-210112192G0.jpg" alt="中国四大黑茶产地，黑茶的四大主产区"></p><p>黑砖茶，因用黑毛茶作原料，色泽黑润，成品块状如砖，故名。</p><p>70年代中期，安化白沙溪茶厂进行工艺改革，在提高面茶和包心茶质量的基础上将面茶和包心茶进行混合压制，不分面茶和里茶，一次压制成型。原料成份为80％的三级黑毛茶和15％的四级黑毛茶，以及5％的其他茶，总含梗量不超过18％。</p><p>黑砖茶的外形为长方砖形，规格为35×18×3.5厘米。每片砖净重2公斤。砖面平整光滑，色泽黑褐，内质香气纯正，滋味浓厚微涩，汤色红黄微暗，叶底老嫩尚匀。主销甘肃、宁夏、青海、新疆等省区，以兰州为集散地。</p><p>黑砖茶砖面上方有“黑砖茶”三字，下方有“湖南安化”四字，中部为五角星。</p><h2 id="冲泡方法">冲泡方法</h2><p><strong>1、泡饮</strong></p><p>一般嫩度高，存放时间短的黑茶适合泡饮；原料等级较高的黑茶，如春茶，相对较细嫩，其内含物质积累的比较多，呈鲜爽味的氨基酸，苦涩味的茶多酚，咖啡碱的含量都比较高，采用泡饮方式，更能品饮出鲜爽度和层次感。泡饮对茶汤的浓度，也较容易地把控，避免茶汤过浓而苦涩。</p><p>存放时间较短的新茶（3年以内），茶叶新鲜，香味还停留在表面，若直接用来冲泡，则可以更好地体会其，色，香，味的层次变化。新茶若是用来煮饮，则会放大茶的缺点，涩感较重，刚接触黑茶的朋友可能不太接受。</p><p><strong>2、煮饮</strong></p><p>煮饮宜选取相对较粗老的<a href="https://www.maigoo.com/maigoo/6335hc_index.html">黑茶</a>，煮茶能够使得茶叶内的物质更多、更为充足的溢出，这就会使得茶汤浓度远高于冲泡浓度，存放年限较长的黑茶进行煮饮，能够更好地将老茶的芬芳展现出来，口感上也更能体现老茶的醇厚柔滑。</p><h2 id="饮用建议">饮用建议</h2><p>黑茶是一款养生佳品，其实不论是什么季节，都适合饮用黑茶，每个季节喝黑茶都有其独特的好处，春天喝黑茶可以助消化，夏天喝可以解暑，秋天喝有助于养生，冬天喝则可以暖胃。黑茶适合四季，但冬天喝是最佳的。此外，黑茶还有5忌：</p><p><strong>1. 忌喝新茶</strong></p><p>黑茶属于后发酵的茶叶种类，可以长期存放，不过饮用时不能喝刚制成的新茶，新茶中的多酚类、醇类等物质没有完全氧化，会对胃部粘膜产生刺激，极易引起胃部不适，至少需要存放15天。</p><p><strong>2. 忌空腹饮茶</strong></p><p>黑茶的茶性相对温和，虽然刺激性较少，但在饮用的过程中不能空腹饮茶，空腹饮用茶汤会分解胃液，此时胃部对咖啡碱和茶碱的吸收程度较高，很容易出现呕吐心慌、四肢无力等醉茶的情况。</p><p><strong>3. 忌饭后立即饮茶</strong></p><p>饭后最好别立即饮用茶汤，至少要在饭后两小时以上饮茶，否则容易影响铁离子的吸收。</p><p><strong>4. 忌喝冷茶</strong></p><p>开水泡！！！刚冲泡好的过烫黑茶不能饮用，完全放凉的黑茶也不具备饮用的价值。</p><p><strong>5. 忌隔夜茶</strong></p><p>可能出现食物中毒。</p>]]></content>
      
      
      <categories>
          
          <category> 茶文化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 养生 </tag>
            
            <tag> 茶 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小青柑</title>
      <link href="/posts/1.html"/>
      <url>/posts/1.html</url>
      
        <content type="html"><![CDATA[<p>小青柑以熟普洱茶和青柑皮，为原料制成的一种茶饮，它是这两年市面上最热门的一款茶叶，喝起来既有普洱茶的浓郁甘醇，又有青柑皮的鲜爽清香，一上市就凭借自己独特的口感，俘获了大批茶客的芳心, 小青柑茶叶的价格一般多少?小青柑茶叶的价格比较昂贵，最便宜的也要200元左右，像那种存放10年以上的，一斤最少1万起。</p><h2 id="小青柑茶叶的价格">小青柑茶叶的价格</h2><p><img src="https://www.yinchar.com/uploads/allimg/230906/7-230Z61F31T49.jpg" alt="小青柑茶叶的价格，普通的200元左右一斤(特级茶1万起步)"></p><p>小青柑茶叶的价格主要根据它的品质，还有存放的时间来定，小青柑是一种十分耐放的茶叶，它里面塞的熟普洱茶，还有青柑皮都能存放10年以上，如果是采用好的普洱茶，比如说勐海熟茶、老班章、福鼎白茶制成的小青柑，一斤的价格少说也要1千起步，并且它的价格是随着存放年龄涨的。</p><p><img src="https://www.yinchar.com/uploads/allimg/230906/7-230Z61F331310.jpg" alt="小青柑茶叶的价格，普通的200元左右一斤(特级茶1万起步)"></p><p>存放越久的小青柑就越值钱，一般存放了五年以上的小青柑，在当地也要大千往上了，存放了超过7年的小青柑，一斤的价格都不用千来计算了，它是直接 上万的，因为小青柑的制作过程十分繁琐，稍不注意就会产生损耗，所以就算是普通的小青柑，它的价格也是比较昂贵的。</p><p><img src="https://www.yinchar.com/uploads/allimg/230906/7-230Z61F3403c.jpg" alt="小青柑茶叶的价格，普通的200元左右一斤(特级茶1万起步)"></p><p>当地最普通的那种小青柑，一斤的价格也要200元左右，如果喜欢小青柑想买来尝鲜的话，这个价位的一般就够了，网上有很多100元以内的小青柑，那种青柑茶一般都是品质不怎么样的，正宗小青柑的成本价就要100多了，这种价格特别便宜的青柑茶多半都是垃圾茶。</p><p><img src="https://www.yinchar.com/uploads/allimg/230906/7-230Z61F34JP.jpg" alt="小青柑茶叶的价格，普通的200元左右一斤(特级茶1万起步)"></p><p>建议是不要购买，不然喝的根本就不是茶叶，喝的是化学添加剂，除了不能买过于便宜的小青柑之外，还需要注意的就是小青柑是不能多喝的，小青柑虽好但它的性情比价猛烈，是不适合天天饮用的，每天饮用对脾胃的伤害比较大，建议一周偶尔喝个一两回就行了。</p>]]></content>
      
      
      <categories>
          
          <category> 茶文化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 养生 </tag>
            
            <tag> 茶 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于MAC代码块的碎碎念</title>
      <link href="/posts/20250126.html"/>
      <url>/posts/20250126.html</url>
      
        <content type="html"><![CDATA[<h2 id="成功示例">成功示例</h2><p>经过三天奋战，终于拿下了心心念念的MAC代码块，最终的效果就和下面展示的代码框一致</p><p>方法很简单，首先修改<code>_config.yml</code>中的<code>代码高亮配置文件</code>到如下样式：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 代码高亮配置文件</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span>    <span class="comment"># 是否显示行号</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;    &#x27;</span>  <span class="comment"># 如果代码中有tab，会被这个替换</span></span><br><span class="line">  <span class="attr">hljs:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>       <span class="comment"># 使用 highlight.js 作为高亮库</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span>      <span class="comment"># 选择一个高亮样式，可以参考 https://highlightjs.org/static/demo/</span></span><br></pre></td></tr></table></figure><p>然后修改<code>_config.butterfly.yml</code>中的<code>代码相关</code>部分到如下样式：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Code Blocks (代码相关)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">mac</span> <span class="comment">#  darker / pale night / light / ocean / mac / mac light / false</span></span><br><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span> <span class="comment"># 复制按钮</span></span><br><span class="line"><span class="attr">highlight_lang:</span> <span class="literal">true</span> <span class="comment"># show the code language</span></span><br><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">false</span> <span class="comment"># 如果设置为 true，长代码块会默认收起，需要点击才能展开。如果设置为 false，代码块会展开显示，用户不需要点击才能查看完整代码。</span></span><br><span class="line"><span class="attr">highlight_height_limit:</span> <span class="number">230</span> <span class="comment"># unit: px</span></span><br><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="探索过程及结果">探索过程及结果</h2><p>起初是看到了一个MAC风格的代码块样式，就像是着了魔一样，寻寻觅觅，磕磕绊绊，磨磨唧唧地开始在网上找方法，在这期间，我用了GPT、CSDN找答案，结果都不太理想，于是一度陷入了绝望——为什么我的hexo和别人的不一样！！！到第二天晚上，功夫不负有心人，终于找到了一个<code>HTML</code>的代码式样，欣喜若狂，紧接着就陷入了优化的泥沼，这段时间可苦了我的<code>GPT</code>了，每天接受我长达10小时的拷打哈哈哈。最有竟然以一种万万没想到的方式实现了相应的功能，自惭形秽…</p><h3 id="第一阶段成果">第一阶段成果</h3><p>这是刚找到<code>HTML</code>代码的时候。这串代码就是MAC上面的三个圆点，可以根据需要灵活调整显示式样。底部是代码块示例。</p><img src="https://p.sda1.dev/21/18df4e42622ade928d46b75b946da7a6/image1.jpg" ><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.mac</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>:<span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">float</span><span class="selector-pseudo">:left</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>:<span class="number">10px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.b1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>:<span class="number">#E0443E</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.b2</span> &#123; <span class="attribute">background</span>:<span class="number">#DEA123</span>; &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.b3</span> &#123; <span class="attribute">background</span>:<span class="number">#1AAB29</span>; &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.warpper</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>:<span class="number">#121212</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>:<span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">785px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;warpper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mac b1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mac b2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mac b3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">```css</span><br><span class="line">#include<span class="tag">&lt;<span class="name">iostream</span>&gt;</span></span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">//</span><br><span class="line">```</span><br></pre></td></tr></table></figure><h3 id="第二阶段成果">第二阶段成果</h3><p>这是加了复制按键并调整代码块颜色等式样的结果。这串代码可以转化为内容是<code>我是代码，请随意编辑</code>的MAC代码框，缺点就是经过渲染后会导致网页的重叠，并且代码框里的内容必须是纯文本，否则会出现页面混乱，总之就是，也不太方便。</p><p>原始代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 样式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.mac</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.b1</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#E0443E</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.b2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#DEA123</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.b3</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#1AAB29</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.warpper</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#121212</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">786px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.warpper</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: table;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">clear</span>: both;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 按钮样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.copy-btn</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#555</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.copy-btn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#777</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 代码块样式 */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#code-block</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#f0f0f0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: black;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">white-space</span>: pre-wrap;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 外部框 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;warpper&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mac b1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mac b2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mac b3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;copy-btn&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;copyCode()&quot;</span>&gt;</span>Copy<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 代码块 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pre</span> <span class="attr">id</span>=<span class="string">&quot;code-block&quot;</span>&gt;</span></span><br><span class="line">        #include<span class="tag">&lt;<span class="name">iostream</span>&gt;</span></span><br><span class="line">        using namespace std;</span><br><span class="line"></span><br><span class="line">        int main() &#123;</span><br><span class="line">            cout &lt;&lt; &quot;Hello World!&quot; &lt;&lt; endl;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    脚本</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">copyCode</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> code = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;code-block&quot;</span>).<span class="property">innerText</span>;</span></span><br><span class="line"><span class="language-javascript">            navigator.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(code).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;代码已复制到剪贴板！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;复制失败：&quot;</span> + err);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>页面元素重叠的情况：这一部分我还没探索出来有效的解决方法，因此这个代码最终也被我弃用了。</p><h3 id="反思总结">反思总结</h3><p>尽量在原始代码架构上做微调，有不懂的问GPT就行了，人工智能要会用，效率才高！！！</p><p>很多看似简单的调整实则牵扯到整个结构的变化，要是没有计算机基础，还是停在基本功能实现层面较好，否则再进哪怕是一点点，都需要大量的时间成本，这个不是每个人都承担得起的。</p><h3 id="顺便提一嘴">顺便提一嘴</h3><p>Typora也有MAC代码框的功能，如图所示，点击图片可以观看教程视频哦~</p><p><a href="https://www.bilibili.com/video/BV1Ww411k7Jt/?spm_id_from=333.337.search-card.all.click&amp;vd_source=151ea1245ea510a36b1ff687d1ce2b87"><img src="https://p.sda1.dev/21/913c45050ae1d91cc890044f23d6a33f/%E6%8F%92%E5%9B%BE2.jpg" alt="点击图片"></a></p><!DOCTYPE html><html lang="zh"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>美观按钮</title>    <style>        .btn {            display: inline-block;            padding: 10px 20px;            font-size: 16px;            font-weight: bold;            text-align: center;            text-decoration: none;            background-color: #4CAF50;            color: white;            border-radius: 8px;            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);            transition: background-color 0.3s, transform 0.3s;        }        .btn:hover {            background-color: #45a049;            transform: translateY(-2px);        }        .btn:active {            background-color: #3e8e41;            transform: translateY(0);        }    </style></head><body>    <a href="https://p.sda1.dev/" class="btn" target="_blank">免费图床</a></body></html>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 技术 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实用脚本</title>
      <link href="/posts/95245819.html"/>
      <url>/posts/95245819.html</url>
      
        <content type="html"><![CDATA[<h1>🐾 一些实用的小脚本</h1><p>最近用GPT编写了一些好用的脚本，可以很大程度上提升工作效率，分享给大家：</p><h2 id="❤️-信息提取及编辑">❤️ 信息提取及编辑</h2><p>这个代码可以从一大堆信息的文件夹中提取出来指定的文件，并且重新编号放到新文件夹中：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义根目录和目标目录</span></span><br><span class="line">root_dir = <span class="string">r&#x27;E:\文件\研究生\课题组\目诊标注\目-截止0718&#x27;</span></span><br><span class="line">target_base_dir = <span class="string">r&#x27;E:\文件\研究生\课题组\目诊标注\report&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义需要提取的图片名称</span></span><br><span class="line">target_image_name = <span class="string">&#x27;report.pdf&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个列表来存储图片信息</span></span><br><span class="line">image_info = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历根目录下的所有文件和子目录</span></span><br><span class="line"><span class="keyword">for</span> subdir, _, files <span class="keyword">in</span> os.walk(root_dir):</span><br><span class="line">    <span class="keyword">if</span> target_image_name <span class="keyword">in</span> files:</span><br><span class="line">        <span class="comment"># 获取上一级目录名称</span></span><br><span class="line">        current_dir = os.path.basename(subdir)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 获取目标图片的路径</span></span><br><span class="line">        image_path = os.path.join(subdir, target_image_name)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果目标目录不存在，则创建</span></span><br><span class="line">        target_dir = os.path.join(target_base_dir, target_image_name[:-<span class="number">4</span>])  <span class="comment"># 去掉图片扩展名作为文件夹名</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(target_dir):</span><br><span class="line">            os.makedirs(target_dir)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 构造新文件名（从1开始编号）</span></span><br><span class="line">        <span class="comment"># 这里使用一个全局变量来跟踪编号，因为os.walk是递归的，我们不能简单地用字典来跟踪每个文件夹的编号</span></span><br><span class="line">        new_image_index = <span class="built_in">len</span>(image_info) + <span class="number">1</span>  <span class="comment"># 全局编号，从1开始</span></span><br><span class="line">        new_image_name = <span class="string">f&#x27;<span class="subst">&#123;new_image_index&#125;</span>.pdf&#x27;</span></span><br><span class="line">        new_image_path = os.path.join(target_dir, new_image_name)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 复制图片到目标目录并重命名</span></span><br><span class="line">        shutil.copy(image_path, new_image_path)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 记录图片信息（上一级目录名称，新文件名（不带扩展名））</span></span><br><span class="line">        image_info.append((current_dir, new_image_index))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将记录的信息写入Excel文件</span></span><br><span class="line">excel_path = os.path.join(target_base_dir, <span class="string">f&#x27;<span class="subst">&#123;target_image_name[:-<span class="number">4</span>]&#125;</span>.xlsx&#x27;</span>)</span><br><span class="line">df = pd.DataFrame(image_info, columns=[<span class="string">&#x27;上一级目录&#x27;</span>, <span class="string">&#x27;重命名后的编号&#x27;</span>])</span><br><span class="line">df.to_excel(excel_path, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;任务完成！&quot;</span>)</span><br></pre></td></tr></table></figure><p>这个代码可以从指定文件中提取相应的信息并且整理到一个表格里，唯一需要的就是我们需要将表格不同列的信息稍作整理：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfReader</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件夹路径</span></span><br><span class="line">folder_path = <span class="string">r&quot;E:\文件\研究生\课题组\目诊标注\report\report&quot;</span></span><br><span class="line">output_excel = os.path.join(folder_path, <span class="string">&quot;extracted_data.xlsx&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义正则表达式提取相关信息</span></span><br><span class="line">patterns = &#123;</span><br><span class="line">    <span class="string">&quot;姓名&quot;</span>: <span class="string">r&quot;姓名：\s*([^\s]+)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;身份证&quot;</span>: <span class="string">r&quot;身份证：\s*([\dXx]+)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;病历号&quot;</span>: <span class="string">r&quot;病历号：\s*([^\s]+)&quot;</span>,</span><br><span class="line">    <span class="string">&quot;手机&quot;</span>: <span class="string">r&quot;手机：\s*([\d-]+)&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 存储提取的数据</span></span><br><span class="line">data = []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历文件夹中的PDF文件，并按照数字大小排序</span></span><br><span class="line">pdf_files = <span class="built_in">sorted</span>(</span><br><span class="line">    [f <span class="keyword">for</span> f <span class="keyword">in</span> os.listdir(folder_path) <span class="keyword">if</span> f.endswith(<span class="string">&quot;.pdf&quot;</span>)],</span><br><span class="line">    key=<span class="keyword">lambda</span> x: <span class="built_in">int</span>(re.findall(<span class="string">r&#x27;\d+&#x27;</span>, x)[<span class="number">0</span>])</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file_name <span class="keyword">in</span> pdf_files:</span><br><span class="line">    pdf_path = os.path.join(folder_path, file_name)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 打开并解析PDF</span></span><br><span class="line">        reader = PdfReader(pdf_path)</span><br><span class="line">        text = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> page <span class="keyword">in</span> reader.pages:</span><br><span class="line">            text += page.extract_text() + <span class="string">&quot;\n&quot;</span>  <span class="comment"># 保留换行符</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 提取信息</span></span><br><span class="line">        extracted_data = [file_name]</span><br><span class="line">        <span class="keyword">for</span> key, pattern <span class="keyword">in</span> patterns.items():</span><br><span class="line">            <span class="keyword">match</span> = re.search(pattern, text, re.MULTILINE)</span><br><span class="line">            value = <span class="keyword">match</span>.group(<span class="number">1</span>) <span class="keyword">if</span> <span class="keyword">match</span> <span class="keyword">else</span> <span class="string">&quot;&quot;</span></span><br><span class="line">            extracted_data.append(value)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 添加到数据列表</span></span><br><span class="line">        data.append(extracted_data)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error processing file <span class="subst">&#123;file_name&#125;</span>: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将数据保存到Excel</span></span><br><span class="line">columns = [<span class="string">&quot;文件名&quot;</span>, <span class="string">&quot;姓名&quot;</span>, <span class="string">&quot;身份证&quot;</span>, <span class="string">&quot;病历号&quot;</span>, <span class="string">&quot;手机&quot;</span>]</span><br><span class="line">df = pd.DataFrame(data, columns=columns)</span><br><span class="line">df.to_excel(output_excel, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;提取完成，结果已保存到 <span class="subst">&#123;output_excel&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上面的代码运行的时候别忘了修改需要操作的文件路径，建议自己先拿一个小文件夹试验一下，可以了再应用到需要操作的所有文件里。</p><h2 id="❤️模拟器自动点击">❤️模拟器自动点击</h2><p>使用<code>mumu模拟器</code>打开拼多多或小红书时，可能会出现回车发不了消息的情况，我们可以设置<code>AutoHotkey</code>自动脚本来实现:</p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#Persistent  ; 让脚本一直运行</span></span><br><span class="line"></span><br><span class="line"><span class="title">Enter::</span></span><br><span class="line"><span class="title">NumpadEnter::</span></span><br><span class="line"><span class="built_in">    IfWinExist,</span> <span class="keyword">ahk_class</span> Qt5156QWindowIcon  <span class="comment">; 检查模拟器窗口存在（小红书）</span></span><br><span class="line">    &#123;</span><br><span class="line">        if (WinActive(<span class="string">&quot;ahk_class Qt5156QWindowIcon&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">; 如果是小红书窗口，模拟点击发送按钮</span></span><br><span class="line"><span class="built_in">            MouseMove,</span> <span class="number">1798</span>, <span class="number">994</span>  <span class="comment">; 小红书的发送按钮坐标</span></span><br><span class="line"><span class="built_in">            MouseClick,</span> left  <span class="comment">; 模拟点击发送按钮</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Else IfWinExist, <span class="keyword">ahk_class</span> AnotherWindowClass  <span class="comment">; 其他程序窗口（假设为 AnotherWindowClass）</span></span><br><span class="line">    &#123;</span><br><span class="line">        if (WinActive(<span class="string">&quot;ahk_class AnotherWindowClass&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">; 如果是另一个程序窗口，调整发送按钮的坐标</span></span><br><span class="line"><span class="built_in">            MouseMove,</span> <span class="number">1796</span>, <span class="number">989</span>  <span class="comment">; 这里是另一个程序发送按钮的坐标</span></span><br><span class="line"><span class="built_in">            MouseClick,</span> left  <span class="comment">; 模拟点击发送按钮</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">Return</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>AutoHotkey 是一种用于自动化任务和创建快捷键的编程语言，通常用于模拟键盘输入、鼠标操作等。​</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 技术 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文章效果测试</title>
      <link href="/posts/83b42d47.html"/>
      <url>/posts/83b42d47.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码似乎有些问题, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="a49c2ea1d4309c1b908967d557fdeae5e919a751030988a6edd5f5bf01b22ff0">4630436162ade97ba2718b7d0c4b3b63cbf22708173a6d59f69c642e7d695da88055fe0192a7b9037c3e221d66ab900b24fc6e04439f4c639b55b44a97bb24dc</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">请输入密码，谢谢.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      
        <tags>
            
            <tag> 作为日记加密 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
